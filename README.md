# ğŸ¨ ChildApp2 - ×¤×œ×˜×¤×•×¨××” ×—×™× ×•×›×™×ª ××™× ×˜×¨××§×˜×™×‘×™×ª

××¢×¨×›×ª ××ª×§×“××ª ×œ×™×¦×™×¨×ª ×ª×›× ×™× ×—×™× ×•×›×™×™× ××•×ª×××™× ××™×©×™×ª ×‘×××¦×¢×•×ª ×‘×™× ×” ××œ××›×•×ª×™×ª.

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

- [×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª](#-×ª×›×•× ×•×ª-×¢×™×§×¨×™×•×ª)
- [×˜×›× ×•×œ×•×’×™×•×ª](#-×˜×›× ×•×œ×•×’×™×•×ª)
- [×”×ª×§× ×” ×•×”×¨×¦×”](#-×”×ª×§× ×”-×•×”×¨×¦×”)
- [×”×’×“×¨×ª Supabase](#-×”×’×“×¨×ª-supabase)
- [××©×ª× ×™ ×¡×‘×™×‘×”](#-××©×ª× ×™-×¡×‘×™×‘×”)
- [××‘× ×” ×”×¤×¨×•×™×§×˜](#-××‘× ×”-×”×¤×¨×•×™×§×˜)
- [×ª×™×¢×•×“ ×œ××©×ª××©×™×](#-×ª×™×¢×•×“-×œ××©×ª××©×™×)
- [×¤×™×¦'×¨×™× ××ª×§×“××™×](#-×¤×™×¦×¨×™×-××ª×§×“××™×)

---

## ğŸŒŸ ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª

### ğŸ’« ×™×¦×™×¨×ª ×ª×›× ×™×

- **×¡×™×¤×•×¨×™× ××™× ×˜×¨××§×˜×™×‘×™×™×** - ×™×¦×™×¨×ª ×¡×™×¤×•×¨×™× ××•×ª×××™× ××™×©×™×ª ×¢× ×ª××•× ×•×ª AI
- **×ª×›× ×™×•×ª ×œ××™×“×” ××•×“×¨×›×•×ª** - 5 ×©×œ×‘×™ ×œ××™×“×” ××•×ª×××™× ×œ×’×™×œ ×•×œ×ª×—×•××™ ×¢× ×™×™×Ÿ
- **×“×¤×™ ×ª×¨×’×•×œ** - ×“×¤×™× ×œ×”×“×¤×¡×” ××•×ª×××™× ××™×©×™×ª
- **×—×•×‘×¨×•×ª ×¢×‘×•×“×”** - ×—×•×‘×¨×•×ª ××™× ×˜×¨××§×˜×™×‘×™×•×ª ×¢× ×ª×¨×’×™×œ×™× ××’×•×•× ×™×

### ğŸ‘¥ × ×™×”×•×œ ××©×ª××©×™×

- ××™××•×ª Supabase ×××•×‘×˜×—
- ×ª××™×›×” ×‘××¡×¤×¨ ×¤×¨×•×¤×™×œ×™ ×™×œ×“×™× ×œ××©×ª××©
- ××¢×¨×›×ª ×§×¨×“×™×˜×™× ×“×™× ××™×ª
- ×”×¨×©××•×ª ×× ×”×œ ×•×× ×”×œ-×¢×œ

### ğŸ¯ ×™×›×•×œ×•×ª AI

- **Google Gemini 2.5 Flash** - ×™×¦×™×¨×ª ×˜×§×¡×˜×™×
- **Gemini Flash Image** - ×™×¦×™×¨×ª ×ª××•× ×•×ª
- ×ª××™×›×” ×‘×ª××•× ×•×ª reference ×œ×“××•×™×•×ª ××™×©×™×•×ª
- JSON Schema validation

### ğŸ“± ×—×•×•×™×™×ª ××©×ª××©

- UI ××¨×©×™× ×¢× ××¤×§×˜×™× ×•×™×–×•××œ×™×™×
- Responsive Design ××œ×
- ×ª××™×›×” ×‘×”×“×¤×¡×”
- ×”×§×¨××ª ×˜×§×¡×˜ (Text-to-Speech)
- ×–×™×”×•×™ ×§×•×œ×™ (Speech Recognition)

---

## ğŸ› ï¸ ×˜×›× ×•×œ×•×’×™×•×ª

### Frontend
- **React 19.2** - ×¡×¤×¨×™×™×ª UI
- **TypeScript** - ×©×¤×ª ×¤×™×ª×•×— ××•×‘× ×™×ª
- **Vite** - Build tool ××”×™×¨
- **CSS Custom Properties** - ×¢×™×¦×•×‘ ×“×™× ××™

### Backend & Services
- **Supabase** - Backend-as-a-Service:
  - Authentication
  - PostgreSQL Database
  - Real-time Subscriptions
  - Row Level Security (RLS)
- **Google Gemini AI** - ×™×¦×™×¨×ª ×ª×›× ×™× ×•×’×¨×¤×™×§×•×ª

### ××—×¡×•×Ÿ × ×ª×•× ×™×
- `users` - ××©×ª××©×™ ×”××¢×¨×›×ª
- `profiles` - ×¤×¨×•×¤×™×œ×™ ×™×œ×“×™×
- `stories` - ×¡×™×¤×•×¨×™× ××™× ×˜×¨××§×˜×™×‘×™×™×
- `learning_plans` - ×ª×›× ×™×•×ª ×œ××™×“×”
- `worksheets` - ×“×¤×™ ×ª×¨×’×•×œ
- `workbooks` - ×—×•×‘×¨×•×ª ×¢×‘×•×“×”
- `credit_costs` - × ×™×”×•×œ ×¢×œ×•×™×•×ª ×“×™× ××™

---

## ğŸš€ ×”×ª×§× ×” ×•×”×¨×¦×”

### ×“×¨×™×©×•×ª ××§×“×™××•×ª

- Node.js 18+ 
- npm ××• pnpm
- ×—×©×‘×•×Ÿ Supabase (×—×™× ×)
- Google AI API Key

### ×©×œ×‘×™ ×”×ª×§× ×”

#### 1. Clone ×”×¤×¨×•×™×§×˜

```bash
git clone https://github.com/pentzz/childapp2.git
cd childapp2
```

#### 2. ×”×ª×§× ×ª ×ª×œ×•×™×•×ª

```bash
npm install
```

#### 3. ×”×’×“×¨×ª ××©×ª× ×™ ×¡×‘×™×‘×”

×¦×¨×• ×§×•×‘×¥ `.env` ×‘×©×•×¨×© ×”×¤×¨×•×™×§×˜:

```env
# Google AI
VITE_API_KEY=your_google_ai_api_key_here

# Supabase
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here
```

#### 4. ×”×¨×¦×ª ×©×¨×ª ×¤×™×ª×•×—

```bash
npm run dev
```

×”××¤×œ×™×§×¦×™×” ×ª×”×™×” ×–××™× ×” ×‘: `http://localhost:5173`

#### 5. Build ×œ×¤×¨×•×“×§×©×Ÿ

```bash
npm run build
npm run preview
```

---

## ğŸ—„ï¸ ×”×’×“×¨×ª Supabase

### ×©×œ×‘ 1: ×™×¦×™×¨×ª ×¤×¨×•×™×§×˜

1. ×”×™×›× ×¡×• ×œ-[Supabase](https://supabase.com)
2. ×¦×¨×• ×¤×¨×•×™×§×˜ ×—×“×©
3. ×©××¨×• ××ª ×”-URL ×•×”-Anon Key

### ×©×œ×‘ 2: ×”×¨×¦×ª ×”××™×’×¨×¦×™×•×ª

×”×¤×¨×•×™×§×˜ ×›×•×œ×œ ×§×•×‘×¥ SQL ××œ×: `supabase_migrations.sql`

**××•×¤×¦×™×” A: ×“×¨×š Dashboard**

1. ×”×™×›× ×¡×• ×œ-Supabase Dashboard
2. ×¢×‘×¨×• ×œ-**SQL Editor**
3. ×”×¢×ª×™×§×• ××ª ×”×ª×•×›×Ÿ ×©×œ `supabase_migrations.sql`
4. ×”×¨×™×¦×• ××ª ×”×¡×§×¨×™×¤×˜

**××•×¤×¦×™×” B: ×“×¨×š CLI**

```bash
# ×”×ª×§× ×ª Supabase CLI
npm install -g supabase

# ×”×ª×—×‘×¨×•×ª
supabase login

# ×”×¨×¦×ª ××™×’×¨×¦×™×”
supabase db push --db-url "your_db_connection_string"
```

### ×©×œ×‘ 3: ××¤×©×•×¨ Real-time

×–×” **×§×¨×™×˜×™** ×œ×¡× ×›×¨×•×Ÿ ×¢×œ×•×™×•×ª ×§×¨×“×™×˜×™×:

1. Dashboard â†’ **Database** â†’ **Replication**
2. ×”×•×¡×™×¤×• ××ª ×˜×‘×œ×ª `credit_costs` ×œ-publication
3. ××• ×”×¨×™×¦×•:

```sql
ALTER PUBLICATION supabase_realtime ADD TABLE credit_costs;
```

### ×©×œ×‘ 4: ×™×¦×™×¨×ª ××©×ª××© ×¨××©×•×Ÿ (Super Admin)

```sql
-- ×”×¨×©××• ×‘××¢×¨×›×ª ×“×¨×š ×”-UI ×ª×—×™×œ×”, ××–:
UPDATE users 
SET is_admin = true, is_super_admin = true 
WHERE email = 'your-email@example.com';
```

ğŸ“š **×œ××™×“×¢ ××¤×•×¨×˜:** ×¨××• `SUPABASE_SETUP.md`

---

## ğŸ”‘ ××©×ª× ×™ ×¡×‘×™×‘×”

### × ×“×¨×©×™×

| ××©×ª× ×” | ×ª×™××•×¨ | ×“×•×’××” |
|-------|--------|--------|
| `VITE_API_KEY` | Google AI API Key | `AIzaSy...` |
| `VITE_SUPABASE_URL` | Supabase Project URL | `https://abc.supabase.co` |
| `VITE_SUPABASE_ANON_KEY` | Supabase Anon Key | `eyJhbG...` |

### ×§×‘×œ×ª Google AI API Key

1. ×¢×‘×¨×• ×œ-[Google AI Studio](https://aistudio.google.com/app/apikey)
2. ×¦×¨×• API Key ×—×“×©
3. ×”×¢×ª×™×§×• ××•×ª×• ×œ-`.env`

---

## ğŸ“ ××‘× ×” ×”×¤×¨×•×™×§×˜

```
childapp2/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ App.tsx                 # ×§×•××¤×•× × ×˜×” ×¨××©×™×ª
â”‚       â”œâ”€â”€ AppContext.tsx          # × ×™×”×•×œ State ×’×œ×•×‘×œ×™
â”‚       â”œâ”€â”€ Login.tsx               # ××¡×š ×›× ×™×¡×” ×•×”×¨×©××”
â”‚       â”œâ”€â”€ LoggedInHeader.tsx      # Header ×œ××©×ª××©×™× ××—×•×‘×¨×™×
â”‚       â”œâ”€â”€ UserProfile.tsx         # × ×™×”×•×œ ×¤×¨×•×¤×™×œ×™ ×™×œ×“×™×
â”‚       â”œâ”€â”€ StoryCreator.tsx        # ×™×¦×™×¨×ª ×¡×™×¤×•×¨×™×
â”‚       â”œâ”€â”€ WorkbookCreator.tsx     # ××¨×›×– ×œ××™×“×” (×ª×›× ×™×•×ª/×“×¤×™×/×—×•×‘×¨×•×ª)
â”‚       â”œâ”€â”€ AdminDashboard.tsx      # ×××©×§ ×× ×”×œ
â”‚       â”œâ”€â”€ Library.tsx             # ×”×¡×¤×¨×™×™×” ×©×œ×™
â”‚       â”œâ”€â”€ Loader.tsx              # ×× ×™××¦×™×™×ª ×˜×¢×™× ×”
â”‚       â””â”€â”€ GlobalStyles.tsx        # ×¡×’× ×•× ×•×ª ×’×œ×•×‘×œ×™×™×
â”‚
â”œâ”€â”€ supabaseClient.ts               # ×—×™×‘×•×¨ Supabase
â”œâ”€â”€ helpers.ts                      # ×¤×•× ×§×¦×™×•×ª ×¢×–×¨
â”œâ”€â”€ styles.ts                       # ×¡×’× ×•× ×•×ª ××©×•×ª×¤×™×
â”‚
â”œâ”€â”€ supabase_migrations.sql         # SQL Schema ××œ×
â”œâ”€â”€ SUPABASE_SETUP.md              # ×”×•×¨××•×ª Supabase ××¤×•×¨×˜×•×ª
â”œâ”€â”€ USER_GUIDE.md                   # ××“×¨×™×š ×œ××©×ª××©×™ ×§×¦×”
â”‚
â”œâ”€â”€ index.html                      # HTML ×¨××©×™ + CSS ×’×œ×•×‘×œ×™
â”œâ”€â”€ index.tsx                       # Entry point
â”œâ”€â”€ vite.config.ts                  # ×”×’×“×¨×•×ª Vite
â”œâ”€â”€ tsconfig.json                   # ×”×’×“×¨×•×ª TypeScript
â””â”€â”€ package.json                    # ×ª×œ×•×™×•×ª
```

---

## ğŸ“– ×ª×™×¢×•×“ ×œ××©×ª××©×™×

××“×¨×™×š ×©×™××•×© ××¤×•×¨×˜ ×¢× ×“×•×’×××•×ª ×–××™×Ÿ ×‘:
ğŸ‘‰ **[USER_GUIDE.md](./USER_GUIDE.md)**

×”××“×¨×™×š ×›×•×œ×œ:
- ×”×•×¨××•×ª ×©×™××•×© ×©×œ×‘ ××—×¨ ×©×œ×‘
- ×“×•×’×××•×ª ×œ×›×œ ×¤×™×¦'×¨
- ×˜×™×¤×™× ×œ×—×™×¡×›×•×Ÿ ×‘×§×¨×“×™×˜×™×
- ×©××œ×•×ª × ×¤×•×¦×•×ª (FAQ)
- ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª

---

## ğŸ¯ ×¤×™×¦'×¨×™× ××ª×§×“××™×

### 1. ×¡× ×›×¨×•×Ÿ Real-time ×©×œ ×¢×œ×•×™×•×ª ×§×¨×“×™×˜×™×

×”××¢×¨×›×ª ××©×ª××©×ª ×‘×× ×’× ×•×Ÿ ××’×¨×¡×™×‘×™ ×œ×¡× ×›×¨×•×Ÿ:

```typescript
// AppContext.tsx
useEffect(() => {
  // 1. Real-time subscription
  supabase.channel('credit_costs_changes')
    .on('postgres_changes', { table: 'credit_costs' }, handler)
    .subscribe();
  
  // 2. Polling fallback (×›×œ 10 ×©× ×™×•×ª)
  setInterval(loadCreditCosts, 10000);
  
  // 3. ×¨×¢× ×•×Ÿ ×‘×¢×ª ×—×–×¨×” ×œ×˜××‘
  document.addEventListener('visibilitychange', handler);
  
  // 4. ×¨×¢× ×•×Ÿ ×œ×¤× ×™ ×›×œ ×™×¦×™×¨×”
  await refreshCreditCosts();
}, []);
```

### 2. ××¢×¨×›×ª ×¤×¨×•×¤×™×œ×™× ××ª×§×“××ª

- ×ª××™×›×” ×‘×ª××•× ×•×ª reference ×œ×“××•×™×•×ª ××•×ª×××•×ª
- ×›×œ ×ª×•×›×Ÿ ××©×•×™×š ×œ×¤×¨×•×¤×™×œ ×¡×¤×¦×™×¤×™
- ×¡×™× ×•×Ÿ ××•×˜×•××˜×™ ×©×œ ×ª×›× ×™× ×œ×¤×™ ×¤×¨×•×¤×™×œ ×¤×¢×™×œ

### 3. Responsive Design ××œ×

```css
/* index.html */
@media (max-width: 1200px) {
  /* ××¡×ª×™×¨ ×˜×§×¡×˜, ××©××™×¨ ××™×™×§×•× ×™× */
}

@media (max-width: 768px) {
  /* ×××©×§ × ×™×™×“ ××œ× */
}
```

### 4. ×˜×™×¤×•×œ ×‘×˜×¢×™× ×” ×•×©×’×™××•×ª

```typescript
// ×›×œ ×§×•××¤×•× × ×˜×” ×›×•×œ×œ×ª:
const [isLoading, setIsLoading] = useState(false);
const [error, setError] = useState('');

// ×¢× Loader ×™×™×¢×•×“×™
{isLoading && <Loader message="×™×•×¦×¨ ×ª×•×›×Ÿ..." />}
```

### 5. ×©××™×¨×” ××•×˜×•××˜×™×ª

- ×¡×™×¤×•×¨×™× × ×©××¨×™× ××—×¨×™ ×›×œ ×—×œ×§
- ×ª×›× ×™×•×ª ×œ××™×“×” × ×©××¨×•×ª ××—×¨×™ ×›×œ ×©×œ×‘
- ×©×—×–×•×¨ ××•×˜×•××˜×™ ×‘×¢×ª ×˜×¢×™× ×ª `contentId`

---

## ğŸ”’ ××‘×˜×—×”

### Row Level Security (RLS)

×›×œ ×”×˜×‘×œ××•×ª ××•×’× ×•×ª ×‘-RLS:

```sql
-- ×“×•×’××”: ×¨×§ ××©×ª××© ×¨×•××” ××ª ×”×¤×¨×•×¤×™×œ×™× ×©×œ×•
CREATE POLICY "Users can view own profiles"
ON profiles FOR SELECT
TO authenticated
USING (user_id = auth.uid());
```

### Authentication

- Supabase Auth ××•×‘× ×”
- Session management ××•×˜×•××˜×™
- Password hashing ×××•×‘×˜×—

### API Keys

- ××©×ª× ×™× ×‘-`.env` (×œ× ×‘-Git!)
- Vite prefix: `VITE_` ×œ×—×©×™×¤×” ×œ×§×œ×™×™× ×˜
- Anon Key ×©×œ Supabase ××•×’×Ÿ ×‘-RLS

---

## ğŸ› Debugging

### Console Logs

×”××¢×¨×›×ª ×›×•×œ×œ×ª logging ××¤×•×¨×˜:

```typescript
console.log('ğŸ”µ Real-time subscription active');
console.log('ğŸ”„ Polling credit costs...');
console.log('âœ… Credit costs synced!');
console.log('âŒ Error:', error);
```

### Tools ××•××œ×¦×™×

- **React Developer Tools** - ×‘×“×™×§×ª state
- **Supabase Studio** - × ×™×”×•×œ DB
- **Network Tab** - ×‘×“×™×§×ª API calls

---

## ğŸ“ˆ ×‘×™×¦×•×¢×™×

### ××•×¤×˜×™××™×–×¦×™×•×ª

- âœ… Real-time ×‘×œ×™ ×¤×•×œ×™× ×’ ××™×•×ª×¨
- âœ… Lazy loading ×©×œ ×§×•××¤×•× × ×˜×•×ª (××¤×©×¨×™ ×‘×¢×ª×™×“)
- âœ… Memoization ×©×œ callbacks
- âœ… Debouncing ×©×œ inputs (××¤×©×¨×™ ×‘×¢×ª×™×“)

### ×–×× ×™ ×˜×¢×™× ×”

| ×¤×¢×•×œ×” | ×–××Ÿ ×××•×¦×¢ |
|-------|-----------|
| ×—×œ×§ ×¡×™×¤×•×¨ | 30-60 ×©× ×™×•×ª |
| ×©×œ×‘ ×œ××™×“×” | 45-90 ×©× ×™×•×ª |
| ×“×£ ×ª×¨×’×•×œ | 40-70 ×©× ×™×•×ª |
| ×—×•×‘×¨×ª | 60-120 ×©× ×™×•×ª |

---

## ğŸš€ Deployment

### Vercel (××•××œ×¥)

```bash
# ×”×ª×§× ×ª Vercel CLI
npm i -g vercel

# Deploy
vercel
```

### Netlify

```bash
# Build
npm run build

# Upload ××ª ×ª×™×§×™×™×ª dist/
```

### ××©×ª× ×™ ×¡×‘×™×‘×” ×‘×¤×¨×•×“×§×©×Ÿ

×•×“××• ×©×”×’×“×¨×ª×:
- `VITE_API_KEY`
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`

---

## ğŸ¤ ×ª×¨×•××”

×¨×•×¦×™× ×œ×ª×¨×•×? ××¦×•×™×Ÿ!

1. Fork ××ª ×”×¤×¨×•×™×§×˜
2. ×¦×¨×• branch ×—×“×© (`git checkout -b feature/amazing-feature`)
3. Commit (`git commit -m 'Add amazing feature'`)
4. Push (`git push origin feature/amazing-feature`)
5. ×¤×ª×—×• Pull Request

---

## ğŸ“ ×¨×™×©×™×•×Ÿ

×¤×¨×•×™×§×˜ ×–×” ×”×•× ×§×•×“ ×¤×ª×•×— ×ª×—×ª ×¨×™×©×™×•×Ÿ MIT.

---

## ğŸ™ ×ª×•×“×•×ª

- **Google Gemini** - AI ××“×”×™×
- **Supabase** - Backend ××•×©×œ×
- **React** - ×”×¡×¤×¨×™×™×” ×”×›×™ ×˜×•×‘×”
- **Vite** - Build tool ××”×™×¨

---

## ğŸ“ ×™×¦×™×¨×ª ×§×©×¨

×™×© ×©××œ×•×ª? ×¨×¢×™×•× ×•×ª? ×‘×¢×™×•×ª?

- ğŸ“§ ××™××™×™×œ: support@childapp.com
- ğŸ› Issues: [GitHub Issues](https://github.com/pentzz/childapp2/issues)
- ğŸ“– ×“×•×§×¡: ×¨××• `USER_GUIDE.md` ×œ××©×ª××©×™×

---

**× ×‘× ×” ×¢× â¤ï¸ ×œ×™×œ×“×™× ×•×œ×”×•×¨×™×**

*×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: ×™× ×•××¨ 2025*

